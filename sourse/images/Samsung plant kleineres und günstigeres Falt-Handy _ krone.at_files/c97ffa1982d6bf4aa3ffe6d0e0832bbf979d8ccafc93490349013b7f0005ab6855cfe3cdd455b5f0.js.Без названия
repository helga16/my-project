/* CDS: c97ffa1982d6bf4aa3ffe6d0e0832bbf979d8ccafc93490349013b7f0005ab6855cfe3cdd455b5f0 at: 11.09.2019 14:51:20 */ function krn_sticky_sidebar_scroll_event(scrollDir,scrollSpeed,totalHeight){var error=false;$(".krn_sticky_sidebar__sidebar").each(function(i,e){var idx="sidebar";if($(e).outerHeight(true)+totalHeight>$(window).height()){var min=totalHeight;var max=0-($(e).outerHeight(true)-$(window).height());if(scrollDir=="down"){if(navigationStickyOffset[idx]-scrollSpeed>max){navigationStickyOffset[idx]-=scrollSpeed}else{navigationStickyOffset[idx]=max}}if(scrollDir=="up"){if(navigationStickyOffset[idx]+scrollSpeed<min){navigationStickyOffset[idx]+=scrollSpeed}else{navigationStickyOffset[idx]=min}}$(e).css("top",navigationStickyOffset[idx]+"px")}var scrollPosition=$(document).scrollTop();if(typeof navigationStickyOffset=="undefined"||typeof navigationStickyOffset[idx]=="undefined"){error=true;return false}if(scrollPosition>=navigationStickyOffset[idx]){if($("body").hasClass(idx+"-sticky")){return true}if(!$(e).siblings("#"+idx+"-placeholder").length&&$(".krn_sticky_sidebar__content").length){var placeholderHeight=$(".krn_sticky_sidebar__content").outerHeight(true)-$(e).outerHeight(true);$(e).after('<div id="'+idx+'-placeholder" style="height:'+placeholderHeight+'px; width:100px;"></div>')}$("body").addClass(idx+"-sticky")}else{$("body").removeClass(idx+"-sticky");if($(e).siblings("#"+idx+"-placeholder").length){$(e).siblings("#"+idx+"-placeholder").remove()}}});if(error){return false}}function krn_sticky_sidebar_scroll_init(totalHeight){$(".krn_sticky_sidebar__sidebar").each(function(i,e){var idx="sidebar";if(typeof navigationStickyOffset[idx]==="undefined"&&!$("body").hasClass(idx+"-sticky")){navigationStickyOffset[idx]=$(e).offset().top;if($(e).css("margin-top")!=="undefined"){navigationStickyOffset[idx]=navigationStickyOffset[idx]-parseInt($(e).css("margin-top"))}}if($(e).outerHeight(true)+totalHeight<=$(window).height()){navigationStickyOffset[idx]=navigationStickyOffset[idx]-totalHeight;$(e).css("top",totalHeight+"px")}else{navigationStickyOffset[idx]=0-($(e).outerHeight(true)-$(window).height());$(e).css("top",navigationStickyOffset[idx]+"px")}})}function positionStickySupport(){var el=document.createElement("a"),mStyle=el.style;mStyle.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;";return mStyle.position.indexOf("sticky")!==-1}function krn_sticky_sidebar_init(){if(positionStickySupport()==true){$(".krn_sticky_sidebar__sidebar").attr("style","position: sticky; position: -webkit-sticky; position: -ms-sticky; top: 0px;")}else{$(".krn_sticky_sidebar__sidebar").removeClass("krn_sticky_sidebar__sidebar");$(".krn_sticky_sidebar__content").removeClass("krn_sticky_sidebar__content");return false}var totalHeight=0;var scrollPos=0;var scrollSpeed=0;var scrollDir=false;var prevScroll=$(document).scrollTop();$(".box.c_navi").each(function(i,e){totalHeight+=$(e).outerHeight(true)});krn_sticky_sidebar_scroll_init(totalHeight);document.addEventListener("scroll",function(){var totalHeight=0;$(".box.c_navi").each(function(i,e){totalHeight+=$(e).outerHeight(true)});if($(document).scrollTop()>scrollPos){scrollDir="down"}else{scrollDir="up"}prevScroll=scrollPos;scrollPos=$(document).scrollTop();scrollSpeed=Math.abs(scrollPos-prevScroll);krn_sticky_sidebar_scroll_event(scrollDir,scrollSpeed,totalHeight)},{passive:true})}function krnStickyNaviInit(){document.addEventListener("scroll",krnStickyNavi,{passive:true})}function krnStickyNavi(){var scrollOffset=$(document).scrollTop();stickyHeights=0;$(".c_navi").each(function(i,e){var name="navi";var classes=$(e).attr("class").split(/\s+/);$.each(classes,function(i,v){if(v.search("-navi")===v.length-"-navi".length){name=v}});var naviHeight=$(e).outerHeight(true);var placeholderID=name+"-placeholder";var stickyClass=name+"--sticky";var $placeholder=$("#"+placeholderID);if(typeof window.navigationStickyOffset[name]=="undefined"||!$(e).hasClass("sticky")){var topOffset=$(e).offset().top;window.navigationStickyOffset[name]=topOffset}else if($placeholder.length){var topOffset=$placeholder.offset().top;window.navigationStickyOffset[name]=topOffset}if(scrollOffset>=navigationStickyOffset[name]-stickyHeights){if(!$(e).hasClass("sticky")){$(e).addClass("sticky");$(e).addClass(stickyClass);if(!$placeholder.length){var naviHeight=$(e).outerHeight(true);$(e).after('<div id="'+placeholderID+'" style="height:'+naviHeight+'px; width:100px;"></div>')}stickyHeights=stickyHeights+naviHeight}else{stickyHeights=stickyHeights+naviHeight}}else{$(e).removeClass("sticky");$(e).removeClass(stickyClass);if($placeholder.length){$placeholder.remove()}stickyHeights=stickyHeights-naviHeight}})}